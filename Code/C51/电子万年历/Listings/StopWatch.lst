C51 COMPILER V9.60.0.0   STOPWATCH                                                         06/26/2022 13:43:20 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE STOPWATCH
OBJECT MODULE PLACED IN .\Objects\StopWatch.obj
COMPILER INVOKED BY: D:\KeilMDKArm\C51\BIN\C51.EXE Hardware\StopWatch.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRIN
                    -T(.\Listings\StopWatch.lst) TABS(2) OBJECT(.\Objects\StopWatch.obj)

line level    source

   1          #include <STC15F2K60S2.H>
*** WARNING C318 IN LINE 1 OF Hardware\StopWatch.c: can't open file 'STC15F2K60S2.H'
   2          
   3          #include "StopWatch.h"
   4          #include "oled.h"
*** WARNING C318 IN LINE 31 OF Hardware\oled.h: can't open file 'STC15F2K60S2.H'
*** ERROR C202 IN LINE 42 OF Hardware\oled.h: 'P1': undefined identifier
*** ERROR C202 IN LINE 43 OF Hardware\oled.h: 'P1': undefined identifier
*** ERROR C202 IN LINE 44 OF Hardware\oled.h: 'P4': undefined identifier
*** ERROR C202 IN LINE 45 OF Hardware\oled.h: 'P1': undefined identifier
*** ERROR C202 IN LINE 46 OF Hardware\oled.h: 'P1': undefined identifier
   5          #include "MatrixKey.h"
   6          #include "AT24C02.h"
   7          
   8          sbit LED  = P4^0;
*** ERROR C202 IN LINE 8 OF Hardware\StopWatch.c: 'P4': undefined identifier
   9          unsigned char StopWatch_Update = 4,StopWatch_State=0;
  10          void Timer1Init(void)   //1毫秒@24.000MHz
  11          {
  12   1        AUXR |= 0x40;   //定时器时钟1T模式
*** ERROR C202 IN LINE 12 OF Hardware\StopWatch.c: 'AUXR': undefined identifier
  13   1        TMOD &= 0x0F;   //设置定时器模式
*** ERROR C202 IN LINE 13 OF Hardware\StopWatch.c: 'TMOD': undefined identifier
  14   1        TL1 = 0x40;   //设置定时初始值
*** ERROR C202 IN LINE 14 OF Hardware\StopWatch.c: 'TL1': undefined identifier
  15   1        TH1 = 0xA2;   //设置定时初始值
*** ERROR C202 IN LINE 15 OF Hardware\StopWatch.c: 'TH1': undefined identifier
  16   1        TF1 = 0;    //清除TF1标志
*** ERROR C202 IN LINE 16 OF Hardware\StopWatch.c: 'TF1': undefined identifier
  17   1        TR1 = 1;    //定时器1开始计时
*** ERROR C202 IN LINE 17 OF Hardware\StopWatch.c: 'TR1': undefined identifier
  18   1        ET1 = 1;
*** ERROR C202 IN LINE 18 OF Hardware\StopWatch.c: 'ET1': undefined identifier
  19   1        EA = 1;
*** ERROR C202 IN LINE 19 OF Hardware\StopWatch.c: 'EA': undefined identifier
  20   1      }
  21          
  22          void Timer1DeInit()
  23          {
  24   1        ET1 = 0;
*** ERROR C202 IN LINE 24 OF Hardware\StopWatch.c: 'ET1': undefined identifier
  25   1      }
  26          void Timer1_Routine() interrupt 3 //1MS
  27          {
  28   1      //  static unsigned char  T2Counter1,T2Counter2;
  29   1        LED = 0;
*** ERROR C202 IN LINE 29 OF Hardware\StopWatch.c: 'LED': undefined identifier
  30   1        TL1 = 0x40;   //设置定时初始值
*** ERROR C202 IN LINE 30 OF Hardware\StopWatch.c: 'TL1': undefined identifier
  31   1        TH1 = 0xA2;   //设置定时初始值
*** ERROR C202 IN LINE 31 OF Hardware\StopWatch.c: 'TH1': undefined identifier
  32   1        if(StopWatch_State)
  33   1        {
  34   2          StopWatch.MS++;
C51 COMPILER V9.60.0.0   STOPWATCH                                                         06/26/2022 13:43:20 PAGE 2   

  35   2        StopWatch_Update = 4;
  36   2        if(StopWatch.MS <1000)return;
  37   2        StopWatch.MS =0;
  38   2        StopWatch.Second++;
  39   2        StopWatch_Update =3;
  40   2        if(StopWatch.Second <60)return;
  41   2        StopWatch.Second =0;
  42   2        StopWatch.Minute++;
  43   2        StopWatch_Update =2;
  44   2        if(StopWatch.Minute <60)return;
  45   2        StopWatch.Minute=0;
  46   2        StopWatch.Hour++;
  47   2        StopWatch_Update =1;
  48   2        if(StopWatch.Hour <99)return;
  49   2        
  50   2        StopWatch.Hour = 0;
  51   2        }
  52   1        
  53   1      }
  54          void StopWatch_Start()
  55          {
  56   1        Timer1Init();
  57   1      }
  58          void StopWatch_Continute()
  59          {
  60   1        Timer1Init();
  61   1      }
  62          void StopWatch_Remeber(unsigned char i)
  63          {
  64   1        
  65   1        AT24C02_WriteData(0x00+i,StopWatch.Hour);
  66   1        AT24C02_WriteData(0x01+i,StopWatch.Minute); 
  67   1        AT24C02_WriteData(0x02+i,StopWatch.Second); 
  68   1        AT24C02_WriteData(0x03+i,StopWatch.MS);   
  69   1      }
  70          void StopWatch_Read(unsigned char i)
  71          {
  72   1        StopWatch.Hour=AT24C02_ReadData(0x00+i);
  73   1        StopWatch.Minute = AT24C02_ReadData(0x01+i);
  74   1        StopWatch.Second = AT24C02_ReadData(0x02+i);
  75   1        StopWatch.MS = AT24C02_ReadData(0x03+i);
  76   1      }
  77          void StopWatch_Stop()
  78          {
  79   1        Timer1DeInit();
  80   1      }
  81          void StopWatch_Display_Init()
  82          {
  83   1        StopWatch.MS = 0;
  84   1        StopWatch.Second = 0;
  85   1        StopWatch.Minute =0;
  86   1        StopWatch.Hour = 0;
  87   1        OLED_Printf(32,4,"%bd:%bd:%bd:%bd",StopWatch.Hour,StopWatch.Minute,StopWatch.Second,StopWatch.MS);
  88   1      }
  89          void StopWatch_Display_DeInit()
  90          {
  91   1        Timer1DeInit();
  92   1        OLED_Clear();
  93   1      }
  94          void StopWatch_Display_Update()
  95          {
  96   1          OLED_Printf(32,4,"%bd:%bd:%bd:%bd",StopWatch.Hour,StopWatch.Minute,StopWatch.Second,StopWatch.MS);
C51 COMPILER V9.60.0.0   STOPWATCH                                                         06/26/2022 13:43:20 PAGE 3   

  97   1      }
  98          void StopWatch_Function(Key_T Key)
  99          {
 100   1        unsigned char Flag = 1;unsigned char Num1=0,Num2=0;
 101   1        StopWatch_Display_Init();
 102   1        switch(Key)
 103   1        {
 104   2          case KEY_ADD: 
 105   2          {
 106   3            StopWatch_State =~StopWatch_State;
 107   3      //      Flag =~Flag;
 108   3      //      switch (Flag)
 109   3      //      {
 110   3      //        case 0:StopWatch_Start();StopWatch_Display_Update();LED = ~LED ;break;
 111   3      //        case 1:StopWatch_Stop();StopWatch_Display_Update();break;
 112   3      //      }
 113   3          }break;
 114   2      //    case KEY_SUB:
 115   2      //    {
 116   2      //      switch (Flag)
 117   2      //      {
 118   2      //        case 0:StopWatch_Remeber(Num1);Num1++;break;
 119   2      //                
 120   2      //        case 1:StopWatch_Read(Num2);if(Num2<Num1)Num2++;else Num2 = 0;
 121   2      //              OLED_Printf(32,6,"%bd:%bd:%bd:%bd",StopWatch.Hour,StopWatch.Minute,StopWatch.Second,StopWatch.MS)
             -;
 122   2      //              break;
 123   2      //      }
 124   2      //    }
 125   2      //      break;
 126   2          case KEY_BACK:
 127   2            StopWatch_Display_DeInit();break;
 128   2        }
 129   1      }

C51 COMPILATION COMPLETE.  2 WARNING(S),  18 ERROR(S)
